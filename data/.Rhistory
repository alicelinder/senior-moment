}
for(i in unique(clim.focal$sp)){
for(s in unique(clim.focal$site)){
clim.focal[which(c(clim.focal$sp == i & clim.focal$site == s)),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == s & chvols.focal$sp == i )),]$relative.vol
}
}
View(clim.focal)
for(i in unique(clim.focal$sp)){
for(s in unique(clim.focal$site)){
if(is.na(chvols.focal[which(c(chvols.focal$site == s & chvols.focal$sp == i )),]$relative.vol) == FALSE)
clim.focal[which(c(clim.focal$sp == i & clim.focal$site == s)),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == s & chvols.focal$sp == i )),]$relative.vol
}
clim.focal <- clim.focal[-which(clim.focal$sp == "HAMVIR"),]
clim.focal <- clim.focal[-which(clim.focal$sp == "SORAME"),]
clim.vol <- merge(ba.chvols, clim.focal, by = c("Individual"))
ba.chvols <- ba.chvols[-which(ba.chvols$sp == "SORAME"),]
myspecieslist <- unique(ba.chvols$sp)
mycolors <- rep(c("#1B9E77", "#D95F02", "#7570B3", "#E7298A"), 10) # need 6 really!
head(ba.chvols)
# plot in base package
plot(ba.chvols$relative.vol, ba.chvols$relative.BA, type="n", ylab="Relative Basal Area", xlab="Relative Convex Hull Volume")
?plot
for (i in c(1:length(myspecieslist))){
subby <- subset(ba.chvols, sp==myspecieslist[i])
points(subby$relative.vol, subby$relative.BA,  col=mycolors[i], pch="O")
}
lm(ba.chvols$relative.BA[ba.chvols$sp == "FAGGRA"] ~ ba.chvols$relative.vol[ba.chvols$sp == "FAGGRA"])
# ACEPEN
abline(0.0254792, -0.0002011, col = "#1B9E77", lwd = 2)
# BETPAP
abline(0.255235, 0.007697, col = "#D95F02", lwd = 2)
#CORALT
abline(-0.0001574, 0.0000892  , col = "#7570B3", lwd = 2)
#FAGGRA
abline(0.083677, -0.007733, col = "#E7298A", lwd = 2)
legend('topright', legend=c("A. pensylvanicum", "B. papyrifera", "C. alternifolia", "F. grandifola"),
lty=1, col=mycolors, bty='n', cex=.75)
load("Focal-Centroid.RData")
focal.centroid$Site <- unlist(
lapply(strsplit(focal.centroid$Individual, "_"),
function(x) x[[2]]))
names(focal.centroid)[names(focal.centroid) == "Site"] <- "site"
comp.index.mean <- aggregate(focal.centroid$relative.BA, list(Species = focal.centroid$sp, Site = focal.centroid$Site), FUN = mean, na.rm=TRUE)
ba.chvols <- merge(chvols.focal, focal.centroid, by = c("sp", "site"))
ba.chvols <- ba.chvols[-which(ba.chvols$sp == "HAMVIR"),]
ba.chvols <- ba.chvols[-which(ba.chvols$sp == "SORAME"),]
save(ba.chvols, file = "BA-CHVols.RData")
summary(lm1 <- lm(relative.BA ~ vol, data = ba.chvols[ba.chvols$sp == "ACEPEN",]))
summary(lm1 <- lm(relative.BA ~ vol, data = ba.chvols[ba.chvols$sp == "BETPAP",]))
summary(lm1 <- lm(relative.BA ~ vol, data = ba.chvols[ba.chvols$sp == "CORALT",]))
summary(lm1 <- lm(relative.BA ~ vol, data = ba.chvols[ba.chvols$sp == "FAGGRA",]))
summary(lm1 <- lm(relative.BA ~ vol, data = ba.chvols[ba.chvols$sp == "HAMVIR",]))
summary(lm1 <- lm(relative.BA ~ vol, data = ba.chvols[ba.chvols$sp == "SORAME",]))
acepen <- ba.chvols[ba.chvols$sp == "ACEPEN",]
betpap <- ba.chvols[ba.chvols$sp == "BETPAP",]
coralt <- ba.chvols[ba.chvols$sp == "CORALT",]
faggra <- ba.chvols[ba.chvols$sp == "FAGGRA",]
ba.chvols.focal <- rbind(acepen, betpap, coralt, faggra)
ba.chvols.focal$vol <- log(ba.chvols.focal$vol)
ba.chvols.focal$relative.BA <- log(ba.chvols.focal$relative.BA)
#lme1 <- lmer(relative.BA ~ vol + (relative.BA | sp), data = ba.chvols.focal)
ranef(lme1)
ggplot(ba.chvols,
aes(vol,relative.BA, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
facet_wrap(~sp, ncol = 3, scales = "free") +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
# Principal components analysis of functional traits to plot against competitiveness index
tree.traits <- read.csv("tree-traits.csv")
# remove Distance, bottom.angle, top.angle, bottom.m, Top.m
tree.traits <- tree.traits[,-13:-17]
# remove DBH.1-DBH.5, notes, route, and date sampled
tree.traits <- tree.traits[,-14:-21]
# calculate stem density
tree.traits$Stem.density = tree.traits$Stem.mass/tree.traits$Stem.volume
# calculate SLA
tree.traits$SLA = tree.traits$Leaf.area / tree.traits$Dry.mass
# calculate C:N ratio
tree.traits$c.n = tree.traits$X.C / tree.traits$X.N
# choose traits
tr <- c("SLA", "Stem.density", "DBH", "c.n")
traits <- tree.traits[complete.cases(tree.traits[,tr]),]
# apply skewness transformation, center and scale the variables prior to the application of PCA
# log transform
log.traits <- log(traits[tr])
# apply PCA - scale. = TRUE is highly advisable, but default is FALSE.
traits.pca <- prcomp(log.traits,
center = TRUE,
scale = TRUE)
# view standard deviation and PC via print method and summary method
print(traits.pca)
summary(traits.pca)
autoplot(prcomp(log.traits))
View(clim.focal)
View(clim.focal)
View(clim.focal)
for(i in unique(clim.focal$sp)){
for(s in unique(clim.focal$site)){
if(is.na(chvols.focal[which(c(chvols.focal$site == s & chvols.focal$sp == i )),]$relative.vol) == FALSE)
clim.focal[which(c(clim.focal$sp == i & clim.focal$site == s)),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == s & chvols.focal$sp == i )),]$relative.vol
else(clim.focal[which(c(clim.focal$sp == i & clim.focal$site == s))]$relative.vol) <- NA
}
}
View(clim.focal)
for(i in unique(clim.focal$sp)){
for(s in unique(clim.focal$site)){
if(is.na(chvols.focal[which(c(chvols.focal$site == s & chvols.focal$sp == i )),]$relative.vol) == FALSE){
clim.focal[which(c(clim.focal$sp == i & clim.focal$site == s)),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == s & chvols.focal$sp == i )),]$relative.vol}
else(clim.focal[which(c(clim.focal$sp == i & clim.focal$site == s))]$relative.vol) <- NA
}
}
clim.focal[which(c(clim.focal$sp == "CORALT" & clim.focal$site == "HF")),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == "HF" & chvols.focal$sp == "CORALT")),]$relative.vol
chvols.focal[which(c(chvols.focal$site == "HF" & chvols.focal$sp == "CORALT")),]$relative.vol
clim.focal[which(c(clim.focal$sp == "CORALT" & clim.focal$site == "HF")),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == "HF" & chvols.focal$sp == "CORALT")),]$relative.vol
clim.focal[which(c(clim.focal$sp == "CORALT" & clim.focal$site == "HF")),]$relative.vol
clim.focal[which(c(clim.focal$sp == "CORALT" & clim.focal$site == "HF")),]
clim.focal[which(c(clim.focal$sp == "CORALT" & clim.focal$site == "WM")),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == "WM" & chvols.focal$sp == "CORALT")),]$relative.vol
clim.focal[which(c(clim.focal$sp == "CORALT" & clim.focal$site == "SH")),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == "SH" & chvols.focal$sp == "CORALT")),]$relative.vol
clim.focal[which(c(clim.focal$sp == "CORALT" & clim.focal$site == "GR")),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == "GR" & chvols.focal$sp == "CORALT")),]$relative.vol
View(chvols.focal)
clim.focal[which(c(clim.focal$sp == "CORALT" & clim.focal$site == "WM")),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == "WM" & chvols.focal$sp == "CORALT")),]$relative.vol
chvols.focal[which(c(chvols.focal$site == "WM" & chvols.focal$sp == "CORALT")),]$relative.vol
clim.focal[which(c(clim.focal$sp == "CORALT" & clim.focal$site == "WM")),]$relative.vol
chvols.focal[which(c(chvols.focal$site == "WM" & chvols.focal$sp == "CORALT")),]$relative.vol
clim.focal[which(c(clim.focal$sp == "FAGGRA" & clim.focal$site == "HF")),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == "HF" & chvols.focal$sp == "FAGGRA")),]$relative.vol
clim.focal[which(c(clim.focal$sp == "FAGGRA" & clim.focal$site == "GR")),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == "GR" & chvols.focal$sp == "FAGGRA")),]$relative.vol
clim.focal[which(c(clim.focal$sp == "FAGGRA" & clim.focal$site == "WM")),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == "WM" & chvols.focal$sp == "FAGGRA")),]$relative.vol
clim.focal[which(c(clim.focal$sp == "FAGGRA" & clim.focal$site == "SH")),]$relative.vol <- chvols.focal[which(c(chvols.focal$site == "SH" & chvols.focal$sp == "FAGGRA")),]$relative.vol
clim.focal <- clim.focal[-which(clim.focal$sp == "HAMVIR"),]
clim.focal <- clim.focal[-which(clim.focal$sp == "SORAME"),]
View(clim.focal)
save(clim.focal, file = "CHVol.Clim.RData")
load("CHVol.Clim.RData")
rm(list = ls())
load("CHVol.Clim.RData")
myspecieslist <- unique(clim.focal$sp)
mycolors <- rep(c("#1B9E77", "#D95F02", "#7570B3", "#E7298A"), 10) # need 6 really!
plot(clim.focal$distance.from.climatic.centroid, clim.focal$relative.vol, type="n", main="Relative Convex Hull Volume across Climatic Envelope", xlab="Distance from Climatic Centroid", ylab="Relative Convex Hull Volume")
View(clim.focal)
rm(list = ls())
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/GitHub/senior-moment/data")
load("CHVol.Clim.RData")
myspecieslist <- unique(clim.focal$sp)
mycolors <- rep(c("#1B9E77", "#D95F02", "#7570B3", "#E7298A"), 10) # need 6 really!
plot(clim.focal$distance.to.climatic.centroid, clim.focal$relative.vol, type="n", main="Relative Convex Hull Volume across Climatic Envelope", xlab="Distance from Climatic Centroid", ylab="Relative Convex Hull Volume")
for (i in c(1:length(myspecieslist))){
subby <- subset(clim.focal, sp==myspecieslist[i])
points(subby$distance.to.climatic.centroid, subby$relative.vol, col=mycolors[i], pch="O")
}
plot(clim.focal$distance.to.climatic.centroid, clim.focal$relative.vol, type="n", xlim<-c(0:5), ylim<-c(0:60) xlab="Distance from Climatic Centroid", ylab="Relative Convex Hull Volume")
plot(clim.focal$distance.to.climatic.centroid, clim.focal$relative.vol, type="n", xlim<-c(0:5), ylim<-c(0:60) xlab="Distance from Climatic Centroid", ylab="Relative Convex Hull Volume")
plot(clim.focal$distance.to.climatic.centroid, clim.focal$relative.vol, type="n", xlim<-c(0,5), ylim<-c(0,60) xlab="Distance from Climatic Centroid", ylab="Relative Convex Hull Volume")
plot(clim.focal$distance.to.climatic.centroid, clim.focal$relative.vol, type="n", xlim<-(0:5), ylim<-(0:60) xlab="Distance from Climatic Centroid", ylab="Relative Convex Hull Volume")
plot(clim.focal$distance.to.climatic.centroid, clim.focal$relative.vol, type="n", xlim<-c(0,5), ylim<-c(0,60) xlab="Distance from Climatic Centroid", ylab="Relative Convex Hull Volume")
plot(clim.focal$distance.to.climatic.centroid, clim.focal$relative.vol, type="n", xlim<-c(0,5), ylim<-c(0,60), xlab="Distance from Climatic Centroid", ylab="Relative Convex Hull Volume")
load("BA-CHVols.RData")
load("BA-CHVols.RData")
View(ba.chvols)
load("~/Library/Mobile Documents/com~apple~CloudDocs/GitHub/senior-moment/data/CHVols.BA.Rdata")
View(ba.chvols)
load("CHVol.Clim.RData")
myspecieslist <- unique(clim.focal$sp)
mycolors <- rep(c("#1B9E77", "#D95F02", "#7570B3", "#E7298A"), 10) # need 6 really!
plot(clim.focal$distance.to.climatic.centroid, clim.focal$relative.vol, type="n", xlab="Distance from Climatic Centroid", ylab="Relative Convex Hull Volume")
for (i in c(1:length(myspecieslist))){
subby <- subset(clim.focal, sp==myspecieslist[i])
points(subby$distance.to.climatic.centroid, subby$relative.vol, col=mycolors[i], pch="O")
}
lm(clim.focal[clim.focal$sp == "ACEPEN"]$distance.to.climatic.centroid ~ clim.focal[clim.focal$sp == "ACEPEN"]$relative.vol)
lm(clim.focal[clim.focal$sp == "ACEPEN",]$distance.to.climatic.centroid ~ clim.focal[clim.focal$sp == "ACEPEN",]$relative.vol)
?lm
abline(2.43167, -0.03103, col = "#1B9E77", lwd = 2)
lm(clim.focal[clim.focal$sp == "ACEPEN",]$relative.vol ~ clim.focal[clim.focal$sp == "ACEPEN",]$distance.to.climatic.centroid )
abline(41.98, -12.81, col = "#1B9E77", lwd = 2)
lm(clim.focal[clim.focal$sp == "BETPAP",]$relative.vol ~ clim.focal[clim.focal$sp == "BETPAP",]$distance.to.climatic.centroid )
abline(41.36, -13.37, col = "#D95F02", lwd = 2)
abline(-25.406, 7.162, col = "#7570B3", lwd = 2)
lm(clim.focal[clim.focal$sp == "CORALT",]$relative.vol ~ clim.focal[clim.focal$sp == "CORALT",]$distance.to.climatic.centroid )
abline(-81.39, 41.88, col = "#7570B3", lwd = 2)
View(clim.focal)
View(clim.focal)
lm(clim.focal[clim.focal$sp == "FAGGRA",]$relative.vol ~ clim.focal[clim.focal$sp == "FAGGRA",]$distance.to.climatic.centroid )
abline(9.507, -1.678, col = "#E7298A", lwd = 2)
load("Clim.Focal.RData")
myspecieslist <- unique(clim.focal$sp)
mycolors <- rep(c("#1B9E77", "#D95F02", "#7570B3", "#E7298A", "#66A61E", "#E6AB02"), 10) # need 6 really!
plot(clim.focal$distance.to.climatic.centroid, clim.focal$relative.BA, type="n", main="Competitiveness Index across Climatic Envelope", xlab="Distance from Climatic Centroid", ylab="Relative Basal Area")
for (i in c(1:length(myspecieslist))){
subby <- subset(clim.focal, sp==myspecieslist[i])
points(subby$distance.to.climatic.centroid, subby$relative.BA, col=mycolors[i], pch=16)
# pch is symbol shape
}
View(clim.focal)
load("CHVols.RData")
chvols.focal <- chvols.focal[-which(chvols.focal$sp == "HAMVIR"),]
chvols.focal <- chvols.focal[-which(chvols.focal$sp == "SORAME"),]
myspecieslist <- unique(chvols.focal$sp)
mycolors <- rep(c("#1B9E77", "#D95F02", "#7570B3", "#E7298A", "#66A61E", "#E6AB02"), 10) # need 6 really!
plot(chvols.focal$lat, chvols.focal$relative.vol, type="n", main="Relative Convex Hull Volume across Latitudes", xlab="Latitude", ylab="Relative Convex Hull Volume")
for (i in c(1:length(myspecieslist))){
subby <- subset(chvols.focal, sp==myspecieslist[i])
points(subby$lat, subby$relative.vol, col=mycolors[i], pch="O")
}
View(chvols.focal)
View(chvols.focal)
ggplot(chvols.focal,
aes(vol,lat, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
facet_wrap(~sp, ncol = 3, scales = "free") +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
ggplot(chvols.focal,
aes(lat, vol, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
facet_wrap(~sp, ncol = 3, scales = "free") +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
View(ba.chvols)
load("~/Library/Mobile Documents/com~apple~CloudDocs/GitHub/senior-moment/data/Species-Traits.RData")
View(tree.traits.focal)
rm(list = ls())
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/GitHub/senior-moment/data")
source("Fig2-source.R")
library(geometry) # install.packages("vegan")
library(FD) # install.packages("FD")
library(plyr) # install.packages("plyr")
library(dplyr) # install.packages("dplyr")
library(reshape2) # install.packages("reshape2")
library(stringr) # install.packages("stringr")
library(ggplot2)
tree.traits <- read.csv("tree-traits.csv")
tree.traits <- tree.traits[,-13:-17]
tree.traits <- tree.traits[,-14:-21]
tree.traits$Stem.density = tree.traits$Stem.mass/tree.traits$Stem.volume
tree.traits$SLA = tree.traits$Leaf.area / tree.traits$Dry.mass
tree.traits$c.n = tree.traits$X.C / tree.traits$X.N
tree.traits.focal <- filter(tree.traits, Species == "ACEPEN" | Species == "BETPAP" | Species == "CORALT" | Species == "FAGGRA" | Species == "HAMVIR" | Species == "SORAME")
tree.traits <-  tree.traits[-which(tree.traits$Individual == "BETPAP04_GR"),]
save(tree.traits.focal, file = "Species-Traits.RData")
tree.traits <- tree.traits[-which(tree.traits$Individual == "FAGGRA10_HF"),]
zerofives <- tree.traits$DBH == 0.5 & !is.na(tree.traits$DBH)
tree.traits$DBH[zerofives] = 0.5 + runif(length(tree.traits$DBH[zerofives]), max = 0.01)
ones <- tree.traits$DBH == 1 & !is.na(tree.traits$DBH)
tree.traits$DBH[ones] = 1 + runif(length(tree.traits$DBH[ones]), max = 0.01)
tr <- c("SLA", "Stem.density", "DBH", "c.n")
chvols = vector()
for(site in unique(tree.traits$Site)){
for(sp in unique(tree.traits$Species)){
ex <- subset(tree.traits, Site == site & Species == sp)
# Find complete cases for this set
ex <- ex[complete.cases(ex[tr]),]
if(nrow(ex) <= length(tr)) vol = NA
else  vol = convhulln(ex[,tr], "FA")$vol
chvols = rbind(chvols, data.frame(site, sp, vol, n = nrow(ex)))
}
}
hist(chvols$vol)
chvols
chvols.focal <- filter(chvols, sp == "ACEPEN" | sp == "BETPAP" | sp == "CORALT" | sp == "FAGGRA" | sp == "HAMVIR" | sp == "SORAME")
sp.tr <- c("SLA", "Stem.density", "DBH", "c.n")
sp.tr <- tree.traits[,sp.tr]
sp.tr
trait.means <- aggregate(sp.tr, list(Species = tree.traits$Species, Site = tree.traits$Site), FUN = mean, na.rm=TRUE)
trait.means[is.nan(trait.means$SLA), ]$SLA <- NA
trait.means[is.nan(trait.means$DBH), ]$DBH <- NA
trait.means[is.nan(trait.means$Stem.density), ]$Stem.density <- NA
trait.means[is.nan(trait.means$c.n), ]$c.n <- NA
d <- read.csv("all.species.dbh.csv", row.names = NULL)
d <- d[,1:3]
overstory <- distinct(d)
names(overstory)[3] = "Species"
d2 <- melt(overstory, id = "Individual", measure.vars = "Species" )
over.all <- as.data.frame(acast(d2, Individual ~ value, length))
acepen <- substr(rownames(over.all), 1, 6) == "ACEPEN"
acepen.col <- colnames(over.all) == "ACEPEN"
over.all[acepen, acepen.col] <- 1
betpap <- substr(rownames(over.all), 1, 6) == "BETPAP"
betpap.col <- colnames(over.all) == "BETPAP"
over.all[betpap, betpap.col] <- 1
coralt <- substr(rownames(over.all), 1, 6) == "CORALT"
coralt.col <- colnames(over.all) == "CORALT"
over.all[coralt, coralt.col] <- 1
faggra <- substr(rownames(over.all), 1, 6) == "FAGGRA"
faggra.col <- colnames(over.all) == "FAGGRA"
over.all[faggra, faggra.col] <- 1
hamvir <- substr(rownames(over.all), 1, 6) == "HAMVIR"
hamvir.col <- colnames(over.all) == "HAMVIR"
over.all[hamvir, hamvir.col] <- 1
sorame <- substr(rownames(over.all), 1, 6) == "SORAME"
sorame.col <- colnames(over.all) == "SORAME"
over.all[sorame, sorame.col] <- 1
head(over.all)
d.hf <- over.all[grep("_HF", rownames(over.all)),]
d.gr <- over.all[grep("_GR", rownames(over.all)),]
d.wm <- over.all[grep("_WM", rownames(over.all)),]
d.sh <- over.all[grep("_SH", rownames(over.all)),]
head(over.all)
over.all
m.hf <- trait.means[trait.means$Site == "HF",]
m.hf <- m.hf[complete.cases(m.hf),]
m.gr <- trait.means[trait.means$Site == "GR",]
m.gr <- m.gr[complete.cases(m.gr),]
m.sh <- trait.means[trait.means$Site == "SH",]
m.wm <- read.csv("m.wm.csv")
x <- colSums(d.hf) != 0
d.hf <- subset(d.hf, select = x)
colSums(d.hf)
sp.t.hf <- colSums(d.hf) != 0
d.hf <- d.hf[,sp.t.hf]
d.hf.sp <- colnames(d.hf)
indata.hf <- m.hf$Species[m.hf$Species %in% d.hf.sp]
rownames(m.hf) <- m.hf$Species
d.hf <- d.hf[,colnames(d.hf) %in% indata.hf]
m.hf <- m.hf[rownames(m.hf) %in% indata.hf,]
d.gr <- d.gr[,colSums(d.gr) != 0]
colSums(d.gr)
sp.t.gr <- colSums(d.gr) != 0
d.gr <- d.gr[,sp.t.gr]
d.gr.sp <- colnames(d.gr)
indata.gr <- m.gr$Species[m.gr$Species %in% d.gr.sp]
rownames(m.gr) <- m.gr$Species
d.gr <- d.gr[,colnames(d.gr) %in% indata.gr]
m.gr <- m.gr[rownames(m.gr) %in% indata.gr,]
colnames(d.gr)
rownames(m.gr)
d.wm <- d.wm[,colSums(d.wm) != 0]
colSums(d.wm)
sp.t.wm <- colSums(d.wm) != 0
d.wm <- d.wm[,sp.t.wm]
d.wm.sp <- colnames(d.wm)
indata.wm <- m.wm$Species[m.wm$Species %in% d.wm.sp]
rownames(m.wm) <- m.wm$Species
d.wm <- d.wm[,colnames(d.wm) %in% indata.wm]
m.wm <- m.wm[rownames(m.wm) %in% indata.wm,]
d.sh <- d.sh[,colSums(d.sh) != 0]
colSums(d.sh)
sp.t.sh <- colSums(d.sh) != 0
d.sh <- d.sh[,sp.t.sh]
d.sh.sp <- colnames(d.sh)
indata.sh <- m.sh$Species[m.sh$Species %in% d.sh.sp]
rownames(m.sh) <- m.sh$Species
d.sh <- d.sh[,colnames(d.sh) %in% indata.sh]
m.sh <- m.sh[rownames(m.sh) %in% indata.sh,]
d.hf <- d.hf[rowSums(d.hf) != 0,]
d.hf
dim(d.hf)
head(d.hf)
dim(m.hf)
chvols.comm.hf <- dbFD(m.hf[3:6], d.hf, corr = 'none')$FRic
hf <- as.data.frame(chvols.comm.hf)
d.wm <- d.wm[rowSums(d.wm) != 0,]
chvols.comm.wm <- dbFD(m.wm[3:6], d.wm, corr = 'none')$FRic
wm <- as.data.frame(chvols.comm.wm)
dim(d.gr)
head(d.gr)
dim(m.gr)
m.gr
d.gr
chvols.comm.gr <- dbFD(m.gr[3:6], d.gr, corr = 'none')$FRic
gr <- as.data.frame(chvols.comm.gr)
write.csv(m.sh, file= "m.sh.csv")
write.csv(d.sh, file= "d.sh.csv")
chvols.comm.sh <- dbFD(m.sh[3:6], d.sh, corr = 'none')$FRic
sh <- as.data.frame(chvols.comm.sh)
load("chvols.comm.Rdata")
chvols.comm$Species = substr(rownames(x), 1, 6)
chvols.mean <- aggregate(chvols.comm$chvols.comm, list(Site = chvols.comm$site), FUN = mean, na.rm=TRUE)
chvols$relative.vol <- NA
load("chvols.comm.Rdata")
View(chvols.comm)
View(chvols.comm)
ggplot(chvols.comm,
aes(lat, vol, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
facet_wrap(~sp, ncol = 3, scales = "free") +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
View(chvols.comm)
chvols.comm$sp <- strsplit(rownames(chvols.comm), 1, 6)
ggplot(chvols.comm,
aes(lat, vol, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
facet_wrap(~sp, ncol = 3, scales = "free") +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
chvols.comm
chvols.comm$sp <- substr(rownames(chvols.comm), 1, 6)
ggplot(chvols.comm,
aes(lat, vol, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
facet_wrap(~sp, ncol = 3, scales = "free") +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
ggplot(chvols.comm,
aes(site, vol, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
facet_wrap(~sp, ncol = 3, scales = "free") +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
View(chvols.comm)
chvols.comm
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
facet_wrap(~sp, ncol = 3, scales = "free") +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
myspecieslist
ggplot(chvols.focal,
aes(lat, vol, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
facet_wrap(~sp, ncol = 3, scales = "free") +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
chvols.comm$site <- as.factor(chvols.comm$site)
levels(chvols.comm$site) <- c(3, 1, 4, 2)
chvols.comm$site <- factor(as.numeric(as.character(chvols.comm$site)), labels = c("HF", "WM", "GR", "SH"))
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_point() +
geom_smooth(method="lm", se=F) +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_smooth(method="lm", se=F) +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_point()  +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_abline()
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_abline() +
geom_point()  +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_abline(sp ~ chvols.comm) +
geom_point()  +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
lm(chvols.comm[chvols.comm$sp == "ACEPEN",]$chvols.comm ~ chvols.comm$site)
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_point()  +
geom_smooth(method="lm", se=F) +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
chvols.comm <- chvols.comm[-which(chvols.comm$sp == "QUEALB"),]
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_point()  +
geom_smooth(method="lm", se=F) +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
chvols.comm <- chvols.comm[-which(chvols.comm$sp == "SORAME"),]
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_point()  +
geom_smooth(method="lm", se=F) +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
chvols.comm <- chvols.comm[-which(chvols.comm$sp == "HAMVIR"),]
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_point()  +
geom_smooth(method="lm", se=F) +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_point()  +
geom_smooth(method="lm", se=F) +
acet_wrap(~sp, ncol = 3, scales = "free") +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
ggplot(chvols.comm,
aes(site, chvols.comm, color = sp)) +
geom_point()  +
geom_smooth(method="lm", se=F) +
facet_wrap(~sp, ncol = 3, scales = "free") +
xlab("Convex Hull Volume") +
ylab("Relative Basal Area")
