rm(list = ls())
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/GitHub/senior-moment/data")
library(geometry)
library(FD)
library(dplyr)
library(reshape2)
library(plyr)
tree.traits <- read.csv("tree-traits.csv")
class(tree.traits$Fresh.mass)
tree.traits <- tree.traits[,-13:-17]
tree.traits <- tree.traits[,-14:-21]
Stem.density <- tree.traits$Stem.mass/tree.traits$Stem.volume
tree.traits <- data.frame(tree.traits, Stem.density)
SLA <- tree.traits$Leaf.area / tree.traits$Dry.mass
tree.traits <- data.frame(tree.traits, SLA)
traits <- select(tree.traits, Site, Species, SLA, Stem.density,
Height, DBH, X.N, X.C, Stomatal.Length, Stomatal.Density)
stopifnot(complete.cases(traits) != is.na(traits))
ok <- complete.cases(traits)
sum(!ok) # how many are not "ok" ?
traits <- traits[ok,]
head(traits)
ex <- subset(traits, Site == "GR" & Species == "ACEPEN")
tr <- c("SLA", "Stem.volume", "DBH", "X.N")
vol = convhulln(ex, "FA")$vol
View(ex)
chvols = vector()
ex <- ex[complete.cases(ex[tr]),]
tr <- c("SLA", "Stem.density", "DBH", "X.N")
ex <- ex[complete.cases(ex[tr]),]
vol = convhulln(ex, "FA")$vol
View(ex)
c.n <- tree.traits$X.C / tree.traits$X.N
rm(list = ls())
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/GitHub/senior-moment/data")
library(geometry)
library(FD)
library(dplyr)
library(reshape2)
library(plyr)
tree.traits <- read.csv("tree-traits.csv")
class(tree.traits$Fresh.mass)
tree.traits <- tree.traits[,-13:-17]
tree.traits <- tree.traits[,-14:-21]
Stem.density <- tree.traits$Stem.mass/tree.traits$Stem.volume
SLA <- tree.traits$Leaf.area / tree.traits$Dry.mass
c.n <- tree.traits$X.C / tree.traits$X.N
tree.traits <- data.frame(tree.traits, Stem.volume, SLA, c.n)
tree.traits <- data.frame(tree.traits, Stem.density, SLA, c.n)
traits <- select(tree.traits, Site, Species, SLA, Stem.density,
Height, DBH, X.N, X.C, Stomatal.Length, Stomatal.Density)
head(traits)
ex <- subset(traits, Site == "GR" & Species == "ACEPEN")
tr <- c("SLA", "Stem.density", "DBH", "X.N")
ex <- ex[complete.cases(ex[tr]),]
vol = convhulln(ex, "FA")$vol
is.na(ex)
View(traits)
rm(list = ls())
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/GitHub/senior-moment/data")
library(geometry)
library(FD)
library(dplyr)
library(reshape2)
library(plyr)
tree.traits <- read.csv("tree-traits.csv")
class(tree.traits$Fresh.mass)
tree.traits <- tree.traits[,-13:-17]
tree.traits <- tree.traits[,-14:-21]
Stem.density <- tree.traits$Stem.mass/tree.traits$Stem.volume
SLA <- tree.traits$Leaf.area / tree.traits$Dry.mass
c.n <- tree.traits$X.C / tree.traits$X.N
tree.traits <- data.frame(tree.traits, Stem.density, SLA, c.n)
traits <- select(tree.traits, Site, Species, SLA, Stem.density,
Height, DBH, c.n)
stopifnot(complete.cases(traits) != is.na(traits))
ok <- complete.cases(traits)
sum(!ok) # how many are not "ok" ?
traits <- traits[ok,]
head(traits)
ex <- subset(traits, Site == "GR" & Species == "ACEPEN")
tr <- c("SLA", "Stem.density", "DBH", "X.N")
ex <- ex[complete.cases(ex[tr]),]
vol = convhulln(ex, "FA")$vol
is.na(ex)
x <- is.na(ex)
View(x)
chvols = vector()
for(site in unique(traits$Site)){
for(sp in unique(traits$Species)){
ex <- subset(traits, Site == site & Species == sp)
# Find complete cases for this set
ex <- ex[complete.cases(ex[tr]),]
if(nrow(ex) < length(tr)) vol = NA
else  vol = convhulln(ex[tr], "FA")$vol
chvols = rbind(chvols, data.frame(site, sp, vol, n = nrow(ex)))
}
}
tree.traits <- read.csv("tree-traits.csv")
class(tree.traits$Fresh.mass)
tree.traits <- tree.traits[,-13:-17]
tree.traits <- tree.traits[,-14:-21]
Stem.density <- tree.traits$Stem.mass/tree.traits$Stem.volume
SLA <- tree.traits$Leaf.area / tree.traits$Dry.mass
c.n <- tree.traits$X.C / tree.traits$X.N
tree.traits <- data.frame(tree.traits, Stem.density, SLA, c.n)
traits <- select(tree.traits, Site, Species, SLA, Stem.density,
Height, DBH, c.n)
stopifnot(complete.cases(traits) != is.na(traits))
ok <- complete.cases(traits)
sum(!ok) # how many are not "ok" ?
traits <- traits[ok,]
View(traits)
rm(list = ls())
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/GitHub/senior-moment/data")
library(geometry)
library(FD)
library(dplyr)
library(reshape2)
library(plyr)
tree.traits <- read.csv("tree-traits.csv")
class(tree.traits$Fresh.mass)
tree.traits <- tree.traits[,-13:-17]
tree.traits <- tree.traits[,-14:-21]
Stem.density <- tree.traits$Stem.mass/tree.traits$Stem.volume
SLA <- tree.traits$Leaf.area / tree.traits$Dry.mass
c.n <- tree.traits$X.C / tree.traits$X.N
tree.traits <- data.frame(tree.traits, Stem.density, SLA, c.n)
traits <- select(tree.traits, Site, Species, SLA, Stem.density,
Height, DBH, c.n)
head(traits)
ex <- subset(traits, Site == "GR" & Species == "ACEPEN")
tr <- c("SLA", "Stem.density", "DBH", "X.N")
ex <- ex[complete.cases(ex[tr]),]
vol = convhulln(ex, "FA")$vol
View(ex)
ex <- ex[complete.cases(ex[,tr]),]
head(ex)
ex <- subset(traits, Site == "GR" & Species == "ACEPEN")
tr <- c("SLA", "Stem.density", "DBH", "X.N")
ex <- ex[complete.cases(ex[,tr]),]
head(tr)
?convhulln
ex <- subset(traits, Site == "GR" & Species == "ACEPEN")
tr <- c("SLA", "Stem.density", "DBH", "X.N")
View(ex)
stopifnot(complete.cases(trr) != is.na(tr))
stopifnot(complete.cases(tr) != is.na(tr))
ok <- complete.cases(tr)
sum(!ok) # how many are not "ok" ?
stopifnot(complete.cases(ex) != is.na(ex))
ok <- complete.cases(ex)
sum(!ok) # how many are not "ok" ?
ex <- ex[ok,]
vol = convhulln(ex, "FA")$vol
tree.traits$Stem.density = tree.traits$Stem.mass/tree.traits$Stem.volume
rm(list = ls())
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/GitHub/senior-moment/data")
library(geometry)
library(FD)
library(dplyr)
library(reshape2)
library(plyr)
tree.traits <- read.csv("tree-traits.csv")
class(tree.traits$Fresh.mass)
tree.traits <- tree.traits[,-13:-17]
tree.traits <- tree.traits[,-14:-21]
tree.traits$Stem.density = tree.traits$Stem.mass/tree.traits$Stem.volume
View(tree.traits)
tree.traits$SLA = tree.traits$Leaf.area / tree.traits$Dry.mass
tree.traits$c.n = tree.traits$X.C / tree.traits$X.N
head(traits)
ex <- subset(traits, Site == "GR" & Species == "ACEPEN")
ex <- subset(tree.traits, Site == "GR" & Species == "ACEPEN")
tr <- c("SLA", "Stem.volume", "DBH", "X.N")
ex <- ex[complete.cases(ex[tr]),]
View(ex)
vol = convhulln(ex, "FA")$vol
